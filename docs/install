#!/bin/bash

U=vagrant

# OS package management
apt-get install -y software-properties-common && \
    add-apt-repository -y ppa:neovim-ppa/unstable && \
    add-apt-repository -y ppa:aacebedo/fasd && \
    apt-get -y update

# OS dependencies
apt-get install -y python-software-properties python-dev python-pip \
    python3-dev python3-pip mosh exuberant-ctags build-essential ruby \
    neovim ruby-dev tmux fasd

# Nvim config
curl https://civiclabsconsulting.github.io/dotfiles/init.vim -o init.vim && \
    mkdir -p /home/$U/.config/nvim && mv init.vim /home/$U/.config/nvim

# Required Nvim Python modules
pip2 install --upgrade neovim && \
    pip3 install --upgrade neovim

# Required Nvim Ruby modules
gem install neovim

# Nvim package management
mkdir -p /home/$U/.local/share/nvim/site/autoload/ && \
    chown $U -R /home/$U
curl -fLo /home/$U/.local/share/nvim/site/autoload/plug.vim --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim

# Git
git config --global user.name "Brandon Stiles"
git config --global user.email stilesbr1@gmail.com
git config --global core.editor nvim

# Tmux
curl https://raw.githubusercontent.com/civiclabsconsulting/dotfiles/master/docs/.tmux.conf \
    -o .tmux.conf
chown $U .tmux.conf

# Bootstrap Neovim
nvim +PlugInstall +UpdateRemotePlugins +qall
